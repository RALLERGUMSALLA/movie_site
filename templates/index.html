<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home</title>
  <style>
    body {
      padding-top: 60px;
      font-family: Arial, sans-serif;
    }
    .content {
      padding: 20px;
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function() {
      // Search Movies
      $('#search-movies-form').submit(function(event) {
        event.preventDefault();
        const query = $('#search-movies-input').val();
        $.get('{{ url_for('search_movies') }}', { query: query }, function(data) {
          $('#movie-results').html(data);
        });
      });

      // Search Users
      $('#search-users-form').submit(function(event) {
        event.preventDefault();
        const query = $('#search-users-input').val();
        $.get('{{ url_for('search_users') }}', { query: query }, function(data) {
          $('#user-results').html(data);
        });
      });
    });
  </script>
</head>
<body>
  {% include 'navbar.html' %}
  <div class="content">
    <h1>Welcome to the Website</h1>

    <h2>Public Features:</h2>
    <ul>
      {% for item in public_data %}
      <li>{{ item.title }}: {{ item.content }}</li>
      {% endfor %}
    </ul>

    {% if session.username %}
    <h2>Private Features:</h2>
    <ul>
      {% for item in private_data %}
      <li>{{ item.title }}: {{ item.content }}</li>
      {% endfor %}
    </ul>
    <p>Logged in as: {{ session.username }}</p>
    {% endif %}

    <h2>Search Movies:</h2>
    <form id="search-movies-form">
        <input type="text" id="search-movies-input" name="query" placeholder="Enter movie title to search">
        <button type="submit">Search</button>
    </form>
    <div id="movie-results">
      {% if films %}
        {% include 'movie_results.html' %}
      {% endif %}
    </div>

    <h2>Search Users:</h2>
    <form id="search-users-form">
        <input type="text" id="search-users-input" name="query" placeholder="Enter username to search">
        <button type="submit">Search</button>
    </form>
    <div id="user-results">
      {% if users is not none %}
        {% include 'user_results.html' %}
      {% endif %}
    </div>
  </div>
</body>
</html>
